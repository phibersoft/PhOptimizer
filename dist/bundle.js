#!/usr/bin/env node
(()=>{"use strict";var e={877:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.colored=void 0,t.colored=(e,t="info")=>`${{info:"[36m",error:"[31m",success:"[32m"}[t]}${e}[0m`},915:function(e,t,o){var i=this&&this.__createBinding||(Object.create?function(e,t,o,i){void 0===i&&(i=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,i,r)}:function(e,t,o,i){void 0===i&&(i=o),e[i]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||i(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(877),t),r(o(162),t),r(o(214),t)},162:function(e,t,o){var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(r,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.optimizer=void 0;const r=o(12);t.optimizer=(e,t,o,n,a=r.AUTO,c=80)=>i(void 0,void 0,void 0,(function*(){const i=`${e}\\${t}`,s=yield(0,r.read)(i);if(yield s.contain(n,a),yield s.quality(c),o)yield s.writeAsync(i);else{const o=t.split("."),i=o.slice(0,o.length-1).join("."),r=o[o.length-1];yield s.writeAsync(`${e}\\${i}-optimized.${r}`)}}))},214:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=o(877);process.on("uncaughtException",((e,t)=>{console.log((0,i.colored)(e.message,"error")),console.log((0,i.colored)(t,"error"))}))},519:function(e,t,o){var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(r,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(515),n=o(147),a=o(12),c=o(521),s=o(915);o(214);const u=new r.ArgumentParser({description:"Phoptimizator is a simple image optimizator from -cli."}),l=(0,c.createInterface)({input:process.stdin,output:process.stdout}),d=["jpg","jpeg","png","tif","gif","bmp"];u.add_argument("-v","--version",{action:"version",version:o(598).i8}),u.add_argument("-f","--file",{help:"Image name on current path. Example: xxx.jpg",default:"ALL"}),u.add_argument("-p","--path",{help:"Image path destination. Default: process.cwd()",default:process.cwd()}),u.add_argument("-q","--quality",{help:"Image quality. Default: 70",default:70}),u.add_argument("-he","--height",{help:"Image height. Default: AUTO",default:a.AUTO}),u.add_argument("-w","--width",{help:"Image width. Default: 1920",default:1920}),u.add_argument("-o","--overwrite",{help:"Overwrite. If you set this option, optimized image overwrites original file with same name.",default:!1});const p=u.parse_args();i(void 0,void 0,void 0,(function*(){const e=Object.keys(p).reduce(((e,t)=>e+`${t}: ${p[t]}\n`),"Options: \n")+"\nAre you sure you want to continue? (y/n)";l.question(e,(e=>i(void 0,void 0,void 0,(function*(){if("y"===e.toLowerCase()){let e=[];"ALL"===p.file?(e=(yield n.promises.readdir(p.path)).filter((e=>{const t=e.split("."),o=t[t.length-1];return d.includes(o)})),console.log(e)):e.push(p.file);for(let t=0;t<e.length;t++){const o=e[t];console.log((0,s.colored)(`Optimizing ${o}... [${t+1}/${e.length}]`,"info")),yield(0,s.optimizer)(p.path,o,p.overwrite,"number"==typeof p.width?p.width:Number(p.width),"number"==typeof p.height?p.height:Number(p.height),"number"==typeof p.quality?p.quality:Number(p.quality))}console.log((0,s.colored)("Optimization completed!","success")),process.exit(5)}else console.log((0,s.colored)("Optimization canceled!","error")),process.exit(13)}))))}))},515:e=>{e.exports=require("argparse")},12:e=>{e.exports=require("jimp")},147:e=>{e.exports=require("fs")},521:e=>{e.exports=require("readline")},598:e=>{e.exports={i8:"2.5.8"}}},t={};!function o(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}(519)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGVBSUUsSUFBQWpCLFdBQ0owQyxFQUFRekMsS0FDUnFELEVBQ0FaLEVBQVF2QyxVQUNpQixpQkFBbEJ1QyxFQUFRdEMsTUFBcUJzQyxFQUFRdEMsTUFBUTRELE9BQU90QixFQUFRdEMsT0FDekMsaUJBQW5Cc0MsRUFBUXJDLE9BQXNCcUMsRUFBUXJDLE9BQVMyRCxPQUFPdEIsRUFBUXJDLFFBQzFDLGlCQUFwQnFDLEVBQVFuQyxRQUF1Qm1DLEVBQVFuQyxRQUFVeUQsT0FBT3RCLEVBQVFuQyxTLENBSTNFaUIsUUFBUUMsS0FBSSxJQUFBL0IsU0FBUSwwQkFBMkIsWUFDL0MwQixRQUFRNkMsS0FBSyxFLE1BRWJ6QyxRQUFRQyxLQUFJLElBQUEvQixTQUFRLHlCQUEwQixVQUM5QzBCLFFBQVE2QyxLQUFLLEdBRWpCLEtBQ0YsRyxVQ3BHQUMsRUFBT0MsUUFBVUMsUUFBUSxXLFNDQXpCRixFQUFPQyxRQUFVQyxRQUFRLE8sVUNBekJGLEVBQU9DLFFBQVVDLFFBQVEsSyxVQ0F6QkYsRUFBT0MsUUFBVUMsUUFBUSxXLG1DQ0NyQkMsRUFBMkIsQ0FBQyxHQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhTCxRQUdyQixJQUFJRCxFQUFTRyxFQUF5QkUsR0FBWSxDQUdqREosUUFBUyxDQUFDLEdBT1gsT0FIQU8sRUFBb0JILEdBQVVJLEtBQUtULEVBQU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVNHLEdBR3BFSixFQUFPQyxPQUNmLENDbkIwQkcsQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3Bob3B0aW1pemVyLy4vc3JjL2xpYi9jb2xvcmVkLnRzIiwid2VicGFjazovL3Bob3B0aW1pemVyLy4vc3JjL2xpYi9pbmRleC50cyIsIndlYnBhY2s6Ly9waG9wdGltaXplci8uL3NyYy9saWIvb3B0aW1pemVyLnRzIiwid2VicGFjazovL3Bob3B0aW1pemVyLy4vc3JjL2xpYi91bmNhdWdodC1oYW5kbGVyLnRzIiwid2VicGFjazovL3Bob3B0aW1pemVyLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vcGhvcHRpbWl6ZXIvZXh0ZXJuYWwgY29tbW9uanMgXCJhcmdwYXJzZVwiIiwid2VicGFjazovL3Bob3B0aW1pemVyL2V4dGVybmFsIGNvbW1vbmpzIFwiamltcFwiIiwid2VicGFjazovL3Bob3B0aW1pemVyL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovL3Bob3B0aW1pemVyL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJyZWFkbGluZVwiIiwid2VicGFjazovL3Bob3B0aW1pemVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Bob3B0aW1pemVyL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29sb3JlZCA9IChcclxuICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgdHlwZTogXCJpbmZvXCIgfCBcImVycm9yXCIgfCBcInN1Y2Nlc3NcIiA9IFwiaW5mb1wiXHJcbik6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgY29sb3JzID0ge1xyXG4gICAgaW5mbzogXCJcXHgxYlszNm1cIixcclxuICAgIGVycm9yOiBcIlxceDFiWzMxbVwiLFxyXG4gICAgc3VjY2VzczogXCJcXHgxYlszMm1cIixcclxuICB9O1xyXG5cclxuICByZXR1cm4gYCR7Y29sb3JzW3R5cGVdfSR7bWVzc2FnZX1cXHgxYlswbWA7XHJcbn07XHJcbiIsImV4cG9ydCAqIGZyb20gXCIuL2NvbG9yZWRcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vb3B0aW1pemVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3VuY2F1Z2h0LWhhbmRsZXJcIjtcclxuIiwiaW1wb3J0IHsgQVVUTywgcmVhZCB9IGZyb20gXCJqaW1wXCI7XHJcblxyXG5leHBvcnQgY29uc3Qgb3B0aW1pemVyID0gYXN5bmMgKFxyXG4gIHBhdGg6IHN0cmluZyxcclxuICBpbWFnZU5hbWU6IHN0cmluZyxcclxuICBvdmVyd3JpdGU6IGJvb2xlYW4sXHJcbiAgd2lkdGg6IG51bWJlcixcclxuICBoZWlnaHQgPSBBVVRPLFxyXG4gIHF1YWxpdHkgPSA4MFxyXG4pID0+IHtcclxuICBjb25zdCBpbWFnZVBhdGggPSBgJHtwYXRofVxcXFwke2ltYWdlTmFtZX1gO1xyXG4gIGNvbnN0IGltYWdlID0gYXdhaXQgcmVhZChpbWFnZVBhdGgpO1xyXG5cclxuICBhd2FpdCBpbWFnZS5jb250YWluKHdpZHRoLCBoZWlnaHQpO1xyXG4gIGF3YWl0IGltYWdlLnF1YWxpdHkocXVhbGl0eSk7XHJcblxyXG4gIGlmIChvdmVyd3JpdGUpIHtcclxuICAgIGF3YWl0IGltYWdlLndyaXRlQXN5bmMoaW1hZ2VQYXRoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgaW1hZ2VOYW1lU3BsaXR0ZWQgPSBpbWFnZU5hbWUuc3BsaXQoXCIuXCIpO1xyXG4gICAgY29uc3QgaW1hZ2VOYW1lV2l0aG91dEV4dGVuc2lvbiA9IGltYWdlTmFtZVNwbGl0dGVkXHJcbiAgICAgIC5zbGljZSgwLCBpbWFnZU5hbWVTcGxpdHRlZC5sZW5ndGggLSAxKVxyXG4gICAgICAuam9pbihcIi5cIik7XHJcbiAgICBjb25zdCBpbWFnZUV4dGVuc2lvbiA9IGltYWdlTmFtZVNwbGl0dGVkW2ltYWdlTmFtZVNwbGl0dGVkLmxlbmd0aCAtIDFdO1xyXG5cclxuICAgIGF3YWl0IGltYWdlLndyaXRlQXN5bmMoXHJcbiAgICAgIGAke3BhdGh9XFxcXCR7aW1hZ2VOYW1lV2l0aG91dEV4dGVuc2lvbn0tb3B0aW1pemVkLiR7aW1hZ2VFeHRlbnNpb259YFxyXG4gICAgKTtcclxuICB9XHJcbn07XHJcbiIsImltcG9ydCB7IGNvbG9yZWQgfSBmcm9tIFwiLi9jb2xvcmVkXCI7XHJcblxyXG5wcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgKGVyciwgcmVhc29uKSA9PiB7XHJcbiAgY29uc29sZS5sb2coY29sb3JlZChlcnIubWVzc2FnZSwgXCJlcnJvclwiKSk7XHJcbiAgY29uc29sZS5sb2coY29sb3JlZChyZWFzb24sIFwiZXJyb3JcIikpO1xyXG59KTtcclxuIiwiaW1wb3J0IHsgQXJndW1lbnRQYXJzZXIgfSBmcm9tIFwiYXJncGFyc2VcIjtcclxuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCB7IEFVVE8gfSBmcm9tIFwiamltcFwiO1xyXG5pbXBvcnQgeyBjcmVhdGVJbnRlcmZhY2UgfSBmcm9tIFwicmVhZGxpbmVcIjtcclxuaW1wb3J0IHsgY29sb3JlZCwgb3B0aW1pemVyIH0gZnJvbSBcIi4vbGliXCI7XHJcbmltcG9ydCBcIi4vbGliL3VuY2F1Z2h0LWhhbmRsZXJcIjtcclxuXHJcbmNvbnN0IHBhcnNlciA9IG5ldyBBcmd1bWVudFBhcnNlcih7XHJcbiAgZGVzY3JpcHRpb246IFwiUGhvcHRpbWl6YXRvciBpcyBhIHNpbXBsZSBpbWFnZSBvcHRpbWl6YXRvciBmcm9tIC1jbGkuXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgY2xpID0gY3JlYXRlSW50ZXJmYWNlKHtcclxuICBpbnB1dDogcHJvY2Vzcy5zdGRpbixcclxuICBvdXRwdXQ6IHByb2Nlc3Muc3Rkb3V0LFxyXG59KTtcclxuXHJcbmNvbnN0IFNVUFBPUlRFRF9UWVBFUyA9IFtcImpwZ1wiLCBcImpwZWdcIiwgXCJwbmdcIiwgXCJ0aWZcIiwgXCJnaWZcIiwgXCJibXBcIl07XHJcblxyXG5wYXJzZXIuYWRkX2FyZ3VtZW50KFwiLXZcIiwgXCItLXZlcnNpb25cIiwge1xyXG4gIGFjdGlvbjogXCJ2ZXJzaW9uXCIsXHJcbiAgdmVyc2lvbjogcmVxdWlyZShcIi4vLi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb24sXHJcbn0pO1xyXG5wYXJzZXIuYWRkX2FyZ3VtZW50KFwiLWZcIiwgXCItLWZpbGVcIiwge1xyXG4gIGhlbHA6IFwiSW1hZ2UgbmFtZSBvbiBjdXJyZW50IHBhdGguIEV4YW1wbGU6IHh4eC5qcGdcIixcclxuICBkZWZhdWx0OiBcIkFMTFwiLFxyXG59KTtcclxucGFyc2VyLmFkZF9hcmd1bWVudChcIi1wXCIsIFwiLS1wYXRoXCIsIHtcclxuICBoZWxwOiBcIkltYWdlIHBhdGggZGVzdGluYXRpb24uIERlZmF1bHQ6IHByb2Nlc3MuY3dkKClcIixcclxuICBkZWZhdWx0OiBwcm9jZXNzLmN3ZCgpLFxyXG59KTtcclxucGFyc2VyLmFkZF9hcmd1bWVudChcIi1xXCIsIFwiLS1xdWFsaXR5XCIsIHtcclxuICBoZWxwOiBcIkltYWdlIHF1YWxpdHkuIERlZmF1bHQ6IDcwXCIsXHJcbiAgZGVmYXVsdDogNzAsXHJcbn0pO1xyXG5wYXJzZXIuYWRkX2FyZ3VtZW50KFwiLWhlXCIsIFwiLS1oZWlnaHRcIiwge1xyXG4gIGhlbHA6IFwiSW1hZ2UgaGVpZ2h0LiBEZWZhdWx0OiBBVVRPXCIsXHJcbiAgZGVmYXVsdDogQVVUTyxcclxufSk7XHJcbnBhcnNlci5hZGRfYXJndW1lbnQoXCItd1wiLCBcIi0td2lkdGhcIiwge1xyXG4gIGhlbHA6IFwiSW1hZ2Ugd2lkdGguIERlZmF1bHQ6IDE5MjBcIixcclxuICBkZWZhdWx0OiAxOTIwLFxyXG59KTtcclxucGFyc2VyLmFkZF9hcmd1bWVudChcIi1vXCIsIFwiLS1vdmVyd3JpdGVcIiwge1xyXG4gIGhlbHA6IFwiT3ZlcndyaXRlLiBJZiB5b3Ugc2V0IHRoaXMgb3B0aW9uLCBvcHRpbWl6ZWQgaW1hZ2Ugb3ZlcndyaXRlcyBvcmlnaW5hbCBmaWxlIHdpdGggc2FtZSBuYW1lLlwiLFxyXG4gIGRlZmF1bHQ6IGZhbHNlLFxyXG59KTtcclxuXHJcbmNvbnN0IG9wdGlvbnMgPSBwYXJzZXIucGFyc2VfYXJncygpO1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICBjb25zdCBxdWVzdGlvblN0cmluZyA9XHJcbiAgICBPYmplY3Qua2V5cyhvcHRpb25zKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XHJcbiAgICAgIHJldHVybiBhY2MgKyBgJHtrZXl9OiAke29wdGlvbnNba2V5XX1gICsgXCJcXG5cIjtcclxuICAgIH0sIGBPcHRpb25zOiBcXG5gKSArIGBcXG5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/ICh5L24pYDtcclxuXHJcbiAgY2xpLnF1ZXN0aW9uKHF1ZXN0aW9uU3RyaW5nLCBhc3luYyAoYW5zd2VyKSA9PiB7XHJcbiAgICBpZiAoYW5zd2VyLnRvTG93ZXJDYXNlKCkgPT09IFwieVwiKSB7XHJcbiAgICAgIGxldCBvcHRpbWl6ZUZpbGVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgaWYgKG9wdGlvbnMuZmlsZSA9PT0gXCJBTExcIikge1xyXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZGRpcihvcHRpb25zLnBhdGgpO1xyXG5cclxuICAgICAgICBvcHRpbWl6ZUZpbGVzID0gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzcGxpdHRlZEZpbGUgPSBmaWxlLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IHNwbGl0dGVkRmlsZVtzcGxpdHRlZEZpbGUubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICAgICAgcmV0dXJuIFNVUFBPUlRFRF9UWVBFUy5pbmNsdWRlcyhleHRlbnNpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhvcHRpbWl6ZUZpbGVzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvcHRpbWl6ZUZpbGVzLnB1c2gob3B0aW9ucy5maWxlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpbWl6ZUZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IG9wdGltaXplRmlsZXNbaV07XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBjb2xvcmVkKFxyXG4gICAgICAgICAgICBgT3B0aW1pemluZyAke2ZpbGV9Li4uIFske2kgKyAxfS8ke29wdGltaXplRmlsZXMubGVuZ3RofV1gLFxyXG4gICAgICAgICAgICBcImluZm9cIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGF3YWl0IG9wdGltaXplcihcclxuICAgICAgICAgIG9wdGlvbnMucGF0aCxcclxuICAgICAgICAgIGZpbGUsXHJcbiAgICAgICAgICBvcHRpb25zLm92ZXJ3cml0ZSxcclxuICAgICAgICAgIHR5cGVvZiBvcHRpb25zLndpZHRoID09PSBcIm51bWJlclwiID8gb3B0aW9ucy53aWR0aCA6IE51bWJlcihvcHRpb25zLndpZHRoKSxcclxuICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmhlaWdodCA9PT0gXCJudW1iZXJcIiA/IG9wdGlvbnMuaGVpZ2h0IDogTnVtYmVyKG9wdGlvbnMuaGVpZ2h0KSxcclxuICAgICAgICAgIHR5cGVvZiBvcHRpb25zLnF1YWxpdHkgPT09IFwibnVtYmVyXCIgPyBvcHRpb25zLnF1YWxpdHkgOiBOdW1iZXIob3B0aW9ucy5xdWFsaXR5KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGNvbG9yZWQoXCJPcHRpbWl6YXRpb24gY29tcGxldGVkIVwiLCBcInN1Y2Nlc3NcIikpO1xyXG4gICAgICBwcm9jZXNzLmV4aXQoNSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhjb2xvcmVkKFwiT3B0aW1pemF0aW9uIGNhbmNlbGVkIVwiLCBcImVycm9yXCIpKTtcclxuICAgICAgcHJvY2Vzcy5leGl0KDEzKTtcclxuICAgIH1cclxuICB9KTtcclxufSkoKTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXJncGFyc2VcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiamltcFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFkbGluZVwiKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxOSk7XG4iXSwibmFtZXMiOlsiY29sb3JlZCIsIm1lc3NhZ2UiLCJ0eXBlIiwiaW5mbyIsImVycm9yIiwic3VjY2VzcyIsIm9wdGltaXplciIsInBhdGgiLCJpbWFnZU5hbWUiLCJvdmVyd3JpdGUiLCJ3aWR0aCIsImhlaWdodCIsIkFVVE8iLCJxdWFsaXR5IiwiaW1hZ2VQYXRoIiwiaW1hZ2UiLCJyZWFkIiwiY29udGFpbiIsIndyaXRlQXN5bmMiLCJpbWFnZU5hbWVTcGxpdHRlZCIsInNwbGl0IiwiaW1hZ2VOYW1lV2l0aG91dEV4dGVuc2lvbiIsInNsaWNlIiwibGVuZ3RoIiwiam9pbiIsImltYWdlRXh0ZW5zaW9uIiwicHJvY2VzcyIsIm9uIiwiZXJyIiwicmVhc29uIiwiY29uc29sZSIsImxvZyIsInBhcnNlciIsIkFyZ3VtZW50UGFyc2VyIiwiZGVzY3JpcHRpb24iLCJjbGkiLCJjcmVhdGVJbnRlcmZhY2UiLCJpbnB1dCIsInN0ZGluIiwib3V0cHV0Iiwic3Rkb3V0IiwiU1VQUE9SVEVEX1RZUEVTIiwiYWRkX2FyZ3VtZW50IiwiYWN0aW9uIiwidmVyc2lvbiIsImhlbHAiLCJkZWZhdWx0IiwiY3dkIiwib3B0aW9ucyIsInBhcnNlX2FyZ3MiLCJxdWVzdGlvblN0cmluZyIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJhY2MiLCJrZXkiLCJxdWVzdGlvbiIsImFuc3dlciIsInRvTG93ZXJDYXNlIiwib3B0aW1pemVGaWxlcyIsImZpbGUiLCJmcyIsInByb21pc2VzIiwicmVhZGRpciIsImZpbHRlciIsInNwbGl0dGVkRmlsZSIsImV4dGVuc2lvbiIsImluY2x1ZGVzIiwicHVzaCIsImkiLCJOdW1iZXIiLCJleGl0IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=